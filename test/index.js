'use strict'
// var ua = require('vigour-ua/navigator')
// ua.webview = true

var DOM = require('vigour-util/is/node') ? {} : document.body
var e = require('vigour-element/e')
var player = require('../lib')

// var toHTML = require('vdom-to-html')
// var test = require('tape')

var app = e({
  DOM: DOM,
  player: e([{
    components: {
      loader: { text: 'LOADING!' },
      icon: { text () { return this.parent.key } }
    },
    config: {
      ads: {
        0: [
          'http://ads.adhese.be/ad3ad/sl_vier.be_hetbestemoetnogkomen_-preroll/rn5707/pr1/re0068007400740070003a002f002f003100390032002e003100360038002e0031002e00320037003a0038003000380036002f003f002400690064003d006d00610063002d006400650073006b0074006f0070002d006300680072006f006d0065002d0038003800300026002400660069006c0065003d002f006500780061006d0070006c0065002f006100640073002f00620061006e006e006500720073002f006100640068006500730065002e006a0073002600240061006300740069006f006e003d006400650076/ur0068007400740070003a002f002f003100390032002e003100360038002e0031002e00320037003a0038003000380036002f003f002400690064003d006d00610063002d006400650073006b0074006f0070002d006300680072006f006d0065002d0038003800300026002400660069006c0065003d002f006500780061006d0070006c0065002f006100640073002f00620061006e006e006500720073002f006100640068006500730065002e006a0073002600240061006300740069006f006e003d006400650076/brChrome;Chrome47;OSX;desktop/dtdesktop/inrbcn;prx/?t=' + new Date().getTime(),
          // 'http://ads.adhese.be/ad3ad/sl_vier.be_hetbestemoetnogkomen_-preroll/rn5707/pr1/re0068007400740070003a002f002f003100390032002e003100360038002e0031002e00320037003a0038003000380036002f003f002400690064003d006d00610063002d006400650073006b0074006f0070002d006300680072006f006d0065002d0038003800300026002400660069006c0065003d002f006500780061006d0070006c0065002f006100640073002f00620061006e006e006500720073002f006100640068006500730065002e006a0073002600240061006300740069006f006e003d006400650076/ur0068007400740070003a002f002f003100390032002e003100360038002e0031002e00320037003a0038003000380036002f003f002400690064003d006d00610063002d006400650073006b0074006f0070002d006300680072006f006d0065002d0038003800300026002400660069006c0065003d002f006500780061006d0070006c0065002f006100640073002f00620061006e006e006500720073002f006100640068006500730065002e006a0073002600240061006300740069006f006e003d006400650076/brChrome;Chrome47;OSX;desktop/dtdesktop/inrbcn;prx/?t=' + new Date().getTime()
          // 'http://techslides.com/demos/sample-videos/small.mp4'
        ],
        50: [
          'http://ads.adhese.be/ad3ad/sl_vier.be_hetbestemoetnogkomen_-preroll/rn5707/pr1/re0068007400740070003a002f002f003100390032002e003100360038002e0031002e00320037003a0038003000380036002f003f002400690064003d006d00610063002d006400650073006b0074006f0070002d006300680072006f006d0065002d0038003800300026002400660069006c0065003d002f006500780061006d0070006c0065002f006100640073002f00620061006e006e006500720073002f006100640068006500730065002e006a0073002600240061006300740069006f006e003d006400650076/ur0068007400740070003a002f002f003100390032002e003100360038002e0031002e00320037003a0038003000380036002f003f002400690064003d006d00610063002d006400650073006b0074006f0070002d006300680072006f006d0065002d0038003800300026002400660069006c0065003d002f006500780061006d0070006c0065002f006100640073002f00620061006e006e006500720073002f006100640068006500730065002e006a0073002600240061006300740069006f006e003d006400650076/brChrome;Chrome47;OSX;desktop/dtdesktop/inrbcn;prx/?t=' + new Date().getTime(),
          // 'http://ads.adhese.be/ad3ad/sl_vier.be_hetbestemoetnogkomen_-preroll/rn5707/pr1/re0068007400740070003a002f002f003100390032002e003100360038002e0031002e00320037003a0038003000380036002f003f002400690064003d006d00610063002d006400650073006b0074006f0070002d006300680072006f006d0065002d0038003800300026002400660069006c0065003d002f006500780061006d0070006c0065002f006100640073002f00620061006e006e006500720073002f006100640068006500730065002e006a0073002600240061006300740069006f006e003d006400650076/ur0068007400740070003a002f002f003100390032002e003100360038002e0031002e00320037003a0038003000380036002f003f002400690064003d006d00610063002d006400650073006b0074006f0070002d006300680072006f006d0065002d0038003800300026002400660069006c0065003d002f006500780061006d0070006c0065002f006100640073002f00620061006e006e006500720073002f006100640068006500730065002e006a0073002600240061006300740069006f006e003d006400650076/brChrome;Chrome47;OSX;desktop/dtdesktop/inrbcn;prx/?t=' + new Date().getTime()
          // 'http://techslides.com/demos/sample-videos/small.mp4'
        ]
      },
      apiKey: '9ed67940-5265-468d-98f5-f4638258d3c5'
    }
  }, player, require('../lib/bitdash'), require('../lib/ad/vast')]),
  title: {
    text: {
      val: 'VIDEO PLAYING',
      $playerAd: 'AD PLAYING'
    }
  }
})

var Observable = require('vigour-observable')

var Data = new Observable({
  inject: require('vigour-observable/lib/data'),
  Child: 'Constructor'
}).Constructor

var data = new Data({
  one: {
    video: 'http://akamaivod.tv.ae/5a5ea/LYX00000004_3860_(3860_ISMUSP).ism/LYX00000004_3860_(3860_ISMUSP).{type}',
    progress: 0,
    duration: 1000
  },
  two: {
    progress: 0,
    duration: 1000,
    video: 'https://cstatic.weborama.fr/advertiser/701/13/73/149/640x360_EtapesVie_SBS_NLBE.mp4'
  }
})

app.val = data.one

// setTimeout(function () {
//   app.player.__input = data.two
//   app.player.emit('data')
//   app.player.ad.origin.set(true)
//   app.player.ended.origin.on(function () {
//     app.player.__input = data.one
//     app.player.emit('data')
//     app.player.ad.origin.set(false)
//   })
// }, 4000)
